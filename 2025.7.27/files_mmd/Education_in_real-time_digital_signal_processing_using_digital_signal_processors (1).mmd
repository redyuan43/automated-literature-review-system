# Education in Real-Time Digital Signal Processing using Digital Signal Processors

Pavel Zahradnik and Boris Simak

Manuscript received February 3, 2012. This work was thankfully supported by the Grant FRVS No. 15/32012, Ministry of Education, Czech Republic.Pavel Zahradnik is with the Telecommunication Engineering Department, Czech Technical University in Prague, Prague, CZ 16627 Czech Republic (phone: 420-22435-2089; fax: 420-23333-9810; e-mail: zahradni@fel.cvut.cz).Roris Simak is with the Telecommunication Engineering Department, Czech Technical University in Prague, Prague, CZ 16627 Czech Republic (e-mail: simak@fel.cvut.cz).

###### Abstract

An advanced education in the real-time digital signal processing is presented. A practical training based on implementation of algorithms on digital signal processors is emphasized. Three laboratory tasks are presented. The long-year experience is summarized. Several recommendations are presented.

 Advanced education, digital signal processing, DSP starter kits, digital signal processors, real-time processing. +
Footnote â€ : publication: Manuscript received February 3, 2012. This work was thankfully supported by the Grant FRVS No. 15/32012, Ministry of Education, Czech Republic.Pavel Zahradnik is with the Telecommunication Engineering Department, Czech Technical University in Prague, Prague, CZ 16627 Czech Republic (phone: 420-22435-2089; fax: 420-23333-9810; e-mail: zahradni@fel.cvut.cz).

## I Introduction

Education in the digital signal processing (DSP) is usually a standard activity at technology oriented universities. Education in the DSP has a long history at the Telecommunication Engineering Department of the Czech Technical University in Prague as well. Similarly to other universities, our practical training in the DSP was based on simulations of DSP algorithms in the Matlab/Simulink environment in the past. Using Matlab simulations students get familiar with the DSP methods and algorithms. Despite of the necessity and usefulness of such kind of education, it became obvious, that this education does not bring sufficient practical skills to the students for their professional careers because of the missing practice in the real-time implementation of the DSP algorithms. That is why we have introduced the digital signal processors into our DSP education two decades ago. We have chosen and adopted the technology of Texas Instruments (TI) mainly because of the TI University programme and because of a wide choice of affordable DSP Starter Kits (DSKs). Because of the leading position of TI in the DSP technology, our students have a good chance to meet the DSP technology they are trained to work with when entering their jobs. We got our first experience with the DSP starter kits TMS320C50. Despite we used them in the education for the practicing of the speech and audio processing, we did numerous non-audio experiments with them in several MSc thesis as well [1]. Later we got an intensive experience with the first multi-processor DSP TMS320C80 and did emerging applications with it [2, 3]. However, the TMS320C80 was not suitable for the regular laboratory education mainly because of its complexity compared to the limited time consisting typically of two hours for 14 weeks semester period, i.e. 28 hours in total. After the introduction of the VLIW (Very Long Instruction Word) DSP family TMS320C6x [4]-[11] in 1996, we changed to this platform mainly because of its performance. We started our practical education in the real-time digital image and video processing. It complemented our previous practical DSP training in one-dimensional signals. Since that time, we have been using various DSPs and DSKs mainly from the TMS320C6x and TMS320DM6x families. We gained a valuable experience with the DSPs TMS320C6211, TMS320C6711, TMS320C6713, TMS320C6416, TMS320C6455, TMS320DM642 and TMS320DM6437. Currently our work horses are still the single core fix point DSKs DaVinci TMDSVDP6437 (Fig. 1) for the image and video processing and the TMDSDSKS6455 (Fig. 2) for the audio and speech processing. We are in the process of deploying the OMAP L138 platform for the training in the double-core heterogeneous DSP technology. On the other hand the introduction of the homogeneous multi-core and many-core DSP technology (e.g. the TMS320C66xx family) into our regular DSP training courses seems to be premature at this time. We are obtaining our first experience in this topic through the implementation activities of our MSc and PhD students.

## II Matlab Simulations and Digital Signal Processors

We are still partly involved in the Matlab/Simulink simulations of the DSP algorithms. While this standard approach is adequate for the off-line practicing of DSP algorithms, it is not good for the practicing of the real-time digital signal processing. For the practical education of the digital signal processing, we have completed our education by the training of DSP algorithms using digital signal processors. In this training students gain an additional knowledge which is inherently not available in the Matlab/Simulink simulations. This extra knowledge represents an added value and forms a competitive advantage for our students. It includes e.g. the real-time data transfer of the input/output signals, managing of circular and ping-pong buffers, real-time debugging, solving of cache-related problems, planning of concurrent DSP tasks, planning of instructions, configuring of the direct memory access (DMA) channels, interrupts, exercising of hardware-related functional blocks like audio and video codecs, timers, serial and parallel interfaces etc. In the programming of the digital signal processors we intentionally avoid the seemingly easier "higher" approaches like the Matlab/Simulink DSPBlockset as they weaken the feeling for the real-time issues and isolate from the hardware layer. We rely on the low level programming using the C language. We have got a favorable feedback from both the domestic and international students. The practical activities in the implementation of the DSP algorithms using digital signal processors are highly appreciated.

## III Selected Topics

We are focused on both the one-dimensional and multi-dimensional digital signal processing in our laboratory DSP training using digital signal processors. Our laboratory training on the digital signal processors includes, but it is not limited to the topics as follows: development tools for DSPs, Code Composer Studio, assembler and linear assembler, intrinsics, code optimization, implementation of basic DSP algorithms including 1-D and 2-D linear discrete convolution for 1-D and 2-D FIR filters, IIR filters, adaptive FIR filters, correlation, echo generation and canceling, fast Fourier transform, discrete cosine transform, discrete wavelet transform, DTMF coding and decoding, image filtering, non-linear image filtering, image enhancement and restoration, motion detection in video sequences, target tracking in video sequences, JPEG compression, simplified JPEG2000 compression etc. We run a set of continuously evolving laboratory tasks.

## IV Laboratory Task - Practicing of Echo Cancer

In this task students are asked to get rid of the disturbing echo in an audio signal. Despite there is a recommended solution based on the autocorrelation function of the disturbed input signal, students are encouraged to propose and implement their own algorithms. The processed signal is evaluated subjectively by listening tests and objectively by metrics based on the autocorrelation function. The hardware platform preferred for this task is the DSK TMDSDSK6455 based on the fix point digital signal processor TMS320C6455 (Fig. 2). The application software is developed in the C language using the development software called Code Composer Studio. The programming in the linear assembler and/or in assembler is appreciated but not required. The key point of this task is an efficient real-time implementation of the algorithm. The XDAIS compliancy is appreciated but not required. In the hardware setup the corrupted audio signal is fed from the audio output of the PC sound card to the audio input of the DSK. The audio signal processed in real-time is sent to the loudspeaker. Each DSP starter kit is completed by a pocket oscilloscope with spectrum analysis. This way the code debugging is simplified by the visualization of the actual output audio signal. Consequently the unwanted distortions in the output signal can be more easily identified. Students work either individually or in groups of two.

## V Laboratory Task - Practicing of Edge Detection

In this task our students are asked to find and display the edges in a monochromatic video sequence in real-time. The Sobel edge operator is recommended, however other edge operators like the Kirsch, Prewitt, Canny and even individually designed/modified edge operators are appreciated. The evaluation of the required functionality, of the quality of the detected edges and of the real time capability is immediately apparent by the visual observation of the output video signal. The hardware platform used in this task is the Digital Video Development Platform (DVDP) TMDSVDP6437 based on the fix point DaVinci digital signal processor TMS320DM6437 (Fig. 1). The application software is developed in the C language. In the hardware setup the input video signal is fed from the CCD/CMOS camera to the composite video input of the DVDP. The processed video signal outgoing from the DVDP is displayed on an LCD TFT monitor.

## VI Laboratory Task - Practicing of Discrete Wavelet Transform

In this task our students are asked to calculate and visualize the wavelet-based decomposition of a monochromatic video sequence on the frame by frame basis in real-time. The two or more-level pyramid discrete wavelet decomposition is required (Fig. 4). The Haar wavelet is recommended because of its simplicity, however more sophisticated basis functions are welcomed and appreciated. The hardware platform used in this task is again the DVDP TMDSVDP6437. The application software is developed solely in the C language in this task.

Fig. 1: The Digital Video Development Platform TMDSVDP6437 based on the DaVinci DSP TMS320DM6437.

Fig. 2: Basic laboratory setup with the DSK TMDSDSK6455.

## VII Expansion Equipment

For the signal acquisition and signal presentation the DSP starter kits are usually equipped with audio and/or video inputs and outputs. Additional circuits can be added to the DSK via the peripheral and memory expansion connectors. The expansion boards are usually called the daughter boards or daughter cards. There are numerous daughter boards available either from TI or from third parties. Because the DSKs are fully documented, it is possible to design specific daughter boards fulfilling particular needs. In the framework of several MSc thesis, we have developed and built various daughter cards providing additional functionality to the DSKs, see e.g. [12]-[16]. For illustration, the daughter card with 1MS/s 16bit analog-to-digital and with 1MS/s 16bit digital-to-analog converters is shown in Fig. 5.

Another daughter card with a unique random pixel access image sensor is shown in Fig. 6. For the DSP starter kits with no video output (e.g. the TMDSDSK6455, Fig. 2), we have developed a simple VGA output via the Multichannel Serial Buffer Port McBSP (Fig. 7). For extremely low-cost embedded projects of our students we have developed a a simple proprietary starter kit based on the floating point DSP TMS320C6713 (Fig. 9).

## VIII Experience and Recommendations

To our experience, the educational results improve with increasing practicing and with growing laboratory experience significantly. When establishing a new DSP lab we recommend to take into account our experience which is summarized as follows:

\(\bullet\) The application of TI DSP starter kits is a safe and proven

Fig. 4: Two-level Haar wavelet decomposition.

Fig. 5: Proprietary daughter card with 1MS/s 16bit A/D and D/A converters.

Fig. 3: Edge detection.

Fig. 6: Proprietary daughter card with the pixel random access image sensor.

way. The development and production of proprietary DSP starter kits, except for special needs and purposes, requires a lot of knowledge and usually brings little financial benefits compared to the off the shelf DSP starter kits.

\(\bullet\) The functionality of the DSP starter kits can be easily extended using proprietary daughter cards.

\(\bullet\) The complexity of the DSP tasks to be practiced should be limited. To our experience, e.g. the JPEG compression technique is adequate for the practical training. On the other hand the JPEG2000 and H.264 algorithms are excessively complex for one semester long subjects.

## IX Conclusions

The paper has presented a practically oriented training in the digital signal processing using digital signal processors. This training adds additional and highly appreciated skills to the students compared to the standard training in the digital signal processing based on simulations. Our accumulated experience in the practical training of digital signal processing using potential mistakes which are not apparent without experience.

## References

* [1] P. Zahdra Malik, M. Klima, J. Cuda, Real Time Video Motion Detection based on the TMS 320C50 Signal Processor, _Texas Instruments TMS320 Educators Conference_, August 1995, Dallas, TX, USA, pp. 51-53.
* [2] V. Libal, P. Paclik, B. Kovar, P. Monsa, M. Vleck, P. Zahdra Malik, Road Sign Recognition System using TMS320CN, _The 2nd European DSP Education and Research Conference_, Paris, France, Sept. 1998, pp. 33-39.
* [3] V. Libal, P. Paclik, B. Kovar, P. Monsa, M. Vleck, P. Zahdra Malik, Road Sign Recognition System using TMS320CN0, _International Conference DSP Germany'98_, Munchen, Germany, October 1998, pp. 41-48.
* [4] N. Dahmoun, Digital Signal Processing Implementations using the TMS320C6000 DSP Platform, Pearson Education Ltd., 2000.
* [5] R. Chassaing, DSP Applications Using C and the TMS320C6x DSK, John Wiley and Sons Inc., 2002.
* [6] S.A. Treter, Communication System Design Using DSP Algorithms with Laboratory Experiments for the TMS320C6701 and TMS320C6711, Kluwer Academic, 2003.
* [7] R. Chassaing, Digital Signal Processing and Applications with the C6713 and C6416 DSK, John Wiley and Sons Inc., 2005.
* [8] S. Qureshi, Embedded Image Processing on the TMS320C6000 and Matlab, Springer 2005.
* [9] R. Oshana, DSP Software Development Techniques for Embedded and Real-Time Systems, Elsevier, 2006.
* [10] T.B. Welch, C. H. G. Wright, Real-Time Digital Signal Processing from Matlab to C with the TMS320C6 DSK, CRC Press, 2006.
* [11] R. Chassaing, D. Reay, Digital Signal Processing and Applications with the C6713 and C6416 DSK, John Wiley and Sons Inc., 2008.
* [12] D. Hradeck, P. Zahdra Malik, Multifunction Video Dapather Card for C6416 DSK, _European DSP Education and Research Symposium EDERS 2006_, Munchen, April 2006, pp. 335-342.
* [13] L. Novak, P. Zahdra Malik, Low-expense Video VGA Output for DSP (in Czech), [http://access.feld.cvut.czu/view/bp/Cisolcankmu=20081120008](http://access.feld.cvut.czu/view/bp/Cisolcankmu=20081120008).
* [14] J. Porsch, P. Zahdra Malik, VGA Output for DSP Development Kit (in Czech), [http://access.feld.cvut.czu/view/bp/Cisolcankmu=2008110006](http://access.feld.cvut.czu/view/bp/Cisolcankmu=2008110006).
* [15] M. Hula, P. Zahdra Malik, Video Output for DSP TMS320C6455 (in Czech), [http://access.feld.cvut.czu/view/bp/Cisolcankmu=2008120002](http://access.feld.cvut.czu/view/bp/Cisolcankmu=2008120002).
* [16] P. Zahdra Malik, B. Simak, M. Vleck, Simple Daughter Cards for TI DSP Statter Kits for the Education in Image and Video Processing, _European DSP Education and Research Symposium_, [CD-ROM], Houston, Texas Instruments, 2008, ISBN 978-0-9552047-2-2.

Fig. 8: Versatile daughter card for rapid prototyping.

Fig. 7: VGA video output using Multichannel buffered serial port McBSP.

Fig. 9: Proprietary DSP starter kit with the floating point DSP TM5320C6713.